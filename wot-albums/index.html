<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Wheel of Time â€” Album Collection</title>
  <meta name="description" content="A dark, moody music collection inspired by the Wheel of Time. Fifteen character albums with original lyrics.">
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”¥</text></svg>">
</head>
<body>

  <!-- Ambient Background -->
  <div class="ambient-bg">
    <div class="ambient-orb"></div>
    <div class="ambient-orb"></div>
    <div class="ambient-orb"></div>
  </div>

  <!-- Header -->
  <header class="site-header">
    <div class="header-content">
      <div>
        <div class="site-title">The Wheel of Time</div>
        <div class="site-subtitle">Album Collection</div>
      </div>
      <a href="#" class="nav-home" id="nav-home" onclick="event.preventDefault(); WOT.goHome();">All Albums</a>
    </div>
  </header>

  <!-- Grid View (Home) -->
  <div id="grid-view">
    <section class="hero">
      <div class="wheel-symbol">
        <svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.4">
          <circle cx="50" cy="50" r="45"/>
          <circle cx="50" cy="50" r="20"/>
          <line x1="50" y1="5" x2="50" y2="30"/>
          <line x1="50" y1="70" x2="50" y2="95"/>
          <line x1="5" y1="50" x2="30" y2="50"/>
          <line x1="70" y1="50" x2="95" y2="50"/>
          <line x1="18" y1="18" x2="36" y2="36"/>
          <line x1="64" y1="64" x2="82" y2="82"/>
          <line x1="82" y1="18" x2="64" y2="36"/>
          <line x1="36" y1="64" x2="18" y2="82"/>
        </svg>
      </div>
      <h1>The Wheel of Time</h1>
      <p>Fifteen character albums. The Pattern weaves as the Pattern wills, and every thread has a song to sing.</p>
    </section>

    <div class="albums-grid" id="albums-container">
      <!-- Rendered by JS -->
    </div>
  </div>

  <!-- Album Detail View -->
  <div class="album-detail" id="detail-view">
    <div class="album-detail-header">
      <div class="album-detail-art">
        <img id="detail-art" src="" alt="Album art">
      </div>
      <div class="album-detail-info">
        <div class="album-detail-character" id="detail-character"></div>
        <h2 class="album-detail-title" id="detail-title"></h2>
        <p class="album-detail-desc" id="detail-desc"></p>
        <div class="album-detail-meta" id="detail-meta"></div>
        <div class="no-audio-badge">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
          Lyrics only â€” audio coming soon
        </div>
      </div>
    </div>

    <div class="album-detail-body">
    <div class="track-list">
      <div class="track-list-header">Tracklist</div>
      <div id="track-list-body">
        <!-- Rendered by JS -->
      </div>
    </div>

    <!-- Lyrics Panel -->
    <div class="lyrics-panel" id="lyrics-panel">
      <div class="lyrics-panel-header">
        <div class="lyrics-panel-title" id="lyrics-title"></div>
        <div style="display:flex;align-items:center;gap:4px;">
          <button class="sync-toggle" id="sync-toggle" onclick="WOT.toggleSync()">Sync</button>
          <button class="lyrics-panel-close" onclick="WOT.hideLyrics()">Close</button>
        </div>
      </div>

      <!-- Sync metrics (hidden by default) -->
      <div class="sync-metrics" id="sync-metrics">
        <span class="sync-metric">
          <span class="sync-metric-dot" style="background:var(--sync-perfect)"></span>
          <span class="sync-metric-value" id="sync-pcetw">â€”</span>% in sync
        </span>
        <span class="sync-metric-sep">|</span>
        <span class="sync-metric">
          Avg drift: <span class="sync-metric-value" id="sync-aae">â€”</span>ms
        </span>
        <span class="sync-metric-sep">|</span>
        <span class="sync-metric">
          <span class="sync-metric-dot" style="background:var(--sync-misaligned)"></span>
          <span class="sync-metric-value" id="sync-misaligned">â€”</span> misaligned
        </span>
        <span class="sync-metric-sep">|</span>
        <div class="sync-tier-bar" id="sync-tier-bar"></div>
      </div>

      <!-- Drift timeline -->
      <div class="sync-drift-timeline" id="sync-drift-timeline">
        <div class="sync-drift-tolerance"></div>
        <div class="sync-drift-baseline"></div>
      </div>
      <div class="sync-legend" id="sync-legend">
        <span class="sync-legend-item"><span class="sync-legend-swatch" style="background:var(--sync-perfect)"></span> &lt;100ms</span>
        <span class="sync-legend-item"><span class="sync-legend-swatch" style="background:var(--sync-good)"></span> &lt;300ms</span>
        <span class="sync-legend-item"><span class="sync-legend-swatch" style="background:var(--sync-drifting)"></span> &lt;500ms</span>
        <span class="sync-legend-item"><span class="sync-legend-swatch" style="background:var(--sync-misaligned)"></span> &gt;500ms</span>
      </div>
      <div class="sync-no-data" id="sync-no-data">No sync reference data available for this track.</div>

      <div class="lyrics-content" id="lyrics-content"></div>
    </div>
    </div><!-- /.album-detail-body -->
  </div>

  <!-- Persistent Audio Player -->
  <div class="audio-player" id="audio-player">
    <div class="player-content">
      <div class="player-track-info">
        <div class="player-art">
          <img id="player-art" src="" alt="">
        </div>
        <div>
          <div class="player-track-name" id="player-track-name">â€”</div>
          <div class="player-album-name" id="player-album-name">â€”</div>
        </div>
      </div>

      <div class="player-controls">
        <button class="player-btn" title="Previous">
          <svg viewBox="0 0 24 24"><polygon points="19,20 9,12 19,4"/><line x1="5" y1="4" x2="5" y2="20" stroke="currentColor" stroke-width="2"/></svg>
        </button>
        <button class="player-btn-play" id="play-btn" onclick="WOT.togglePlay()" title="Play">
          <svg viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21"/></svg>
        </button>
        <button class="player-btn" title="Next">
          <svg viewBox="0 0 24 24"><polygon points="5,4 15,12 5,20"/><line x1="19" y1="4" x2="19" y2="20" stroke="currentColor" stroke-width="2"/></svg>
        </button>
      </div>

      <div class="player-progress-container">
        <span class="player-time">0:00</span>
        <div class="player-progress">
          <div class="player-progress-fill"></div>
        </div>
        <span class="player-time">0:00</span>
      </div>

      <div class="player-volume">
        <button class="player-btn" title="Volume">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
        </button>
        <div class="player-volume-slider">
          <div class="player-volume-fill"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sync Tooltip (positioned by JS) -->
  <div class="sync-tooltip" id="sync-tooltip">
    <div class="sync-tooltip-title" id="sync-tooltip-title"></div>
    <div class="sync-tooltip-row"><span class="sync-tooltip-label">Offset:</span> <span class="sync-tooltip-value" id="sync-tooltip-offset"></span></div>
    <div class="sync-tooltip-row"><span class="sync-tooltip-label">Expected:</span> <span class="sync-tooltip-value" id="sync-tooltip-expected"></span></div>
    <div class="sync-tooltip-row"><span class="sync-tooltip-label">Actual:</span> <span class="sync-tooltip-value" id="sync-tooltip-actual"></span></div>
    <div class="sync-tooltip-row"><span class="sync-tooltip-label">Confidence:</span> <span class="sync-tooltip-value" id="sync-tooltip-confidence"></span></div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <p>The Wheel of Time Album Collection &mdash; An Ada Production</p>
  </footer>

  <script src="js/albums.js"></script>
  <script src="js/lyrics-timings.js"></script>
  <script src="js/sync-reference.js"></script>
  <script src="js/sync-analysis.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
